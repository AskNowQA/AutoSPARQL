<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<artifactId>autosparql-parent</artifactId>
		<groupId>org.aksw.autosparql</groupId>
		<version>1.0-SNAPSHOT</version>
	</parent>
	<artifactId>autosparql-tbsl</artifactId>
	<packaging>war</packaging>
	<name>AutoSPARQL Lite</name>
	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<vaadin.version>6.8.0</vaadin.version>
		<gwt.version>2.3.0</gwt.version>
		<gwt.plugin.version>2.3.0</gwt.plugin.version>
		<jdeb.version>1.3</jdeb.version>
	</properties>

	<build>
		<finalName>autosparql-lite</finalName>
		<plugins>
			<plugin>
				<artifactId>jdeb</artifactId>
				<groupId>org.vafer</groupId>
				<version>${jdeb.version}</version>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>jdeb</goal>
						</goals>
						<configuration>
							<deb>${project.build.directory}/${project.build.finalName}_[[version]]_all.deb</deb>
							<changesOut>${project.build.directory}/${project.build.finalName}_[[version]]_all.changes</changesOut>
							<snapshotExpand>true</snapshotExpand>
							<snapshotEnv />
							<dataSet>
								<data>
									<src>${project.build.directory}/${project.build.finalName}.war</src>
									<type>file</type>
									<mapper>
										<type>perm</type>
										<prefix>/var/lib/tomcat7/webapps</prefix>
									</mapper>
								</data>
							</dataSet>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<!-- Duplicate of gwt-maven-plugin from the profiles. Only putting it
				here properly applies the extraJvmArgs and thus provides sufficient RAM for
				successful compilation. -->
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>gwt-maven-plugin</artifactId>
				<version>${gwt.plugin.version}</version>
				<configuration>
					<localWorkers>1</localWorkers>
					<fork>false</fork>
					<webappDirectory>src/main/webapp/VAADIN/widgetsets</webappDirectory>
					<extraJvmArgs>-Xmx2000M -Xss1024k -XX:+UseConcMarkSweepGC</extraJvmArgs>
					<runTarget>autosparql-tbsl</runTarget>
					<hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
					<noServer>true</noServer>
					<port>9090</port>
					<compileReport>false</compileReport>
				</configuration>
				<!-- <executions> <execution> <goals> <goal>resources</goal> <goal>compile</goal>
					</goals> </execution> </executions> -->
				<dependencies>
					<dependency>
						<groupId>com.google.gwt</groupId>
						<artifactId>gwt-dev</artifactId>
						<version>${gwt.version}</version>
					</dependency>
					<dependency>
						<groupId>com.google.gwt</groupId>
						<artifactId>gwt-user</artifactId>
						<version>${gwt.version}</version>
					</dependency>
				</dependencies>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<configuration>
					<!-- <fork>false</fork> <maxmem>2023m</maxmem> -->
					<source>1.7</source>
					<target>1.7</target>
					<encoding>UTF-8</encoding>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-war-plugin</artifactId>
				<version>2.1.1</version>
			</plugin>

			<!-- Compile custom GWT components or widget dependencies with the GWT
				compiler -->
			<!-- <plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>gwt-maven-plugin</artifactId>
				<version>${gwt.plugin.version}</version> <configuration> <webappDirectory>${project.build.directory}/${project.build.finalName}/VAADIN/widgetsets</webappDirectory>
				<extraJvmArgs>-Xmx512M -Xss1024k</extraJvmArgs> <runTarget>autosparql-tbsl</runTarget>
				<hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
				<noServer>true</noServer> <port>8080</port> <compileReport>false</compileReport>
				</configuration> <executions> <execution> <goals> <goal>resources</goal>
				<goal>compile</goal> </goals> </execution> </executions> <dependencies> <dependency>
				<groupId>com.google.gwt</groupId> <artifactId>gwt-dev</artifactId> <version>${gwt.version}</version>
				</dependency> <dependency> <groupId>com.google.gwt</groupId> <artifactId>gwt-user</artifactId>
				<version>${gwt.version}</version> </dependency> </dependencies> </plugin>
				<plugin> <groupId>com.vaadin</groupId> <artifactId>vaadin-maven-plugin</artifactId>
				<version>1.0.2</version> <executions> <execution> <configuration> </configuration>
				<goals> <goal>update-widgetset</goal> </goals> </execution> </executions>
				</plugin> -->

			<!-- A simple Jetty test server at http://localhost:8080/autosparql-tbsl
				can be launched with the Maven goal jetty:run and stopped with jetty:stop -->

			<plugin>
				<groupId>org.eclipse.jetty</groupId>
				<artifactId>jetty-maven-plugin</artifactId>
				<!-- <version>9.0.7.v20131107</version> -->
				<configuration>
					<webApp>
						<contextPath>/${project.build.finalName}</contextPath>
						<baseResource implementation="org.eclipse.jetty.util.resource.ResourceCollection">
							<resourcesAsCSV>src/main/webapp,${project.build.directory}/classes</resourcesAsCSV>
						</baseResource>
					</webApp>
				</configuration>
			</plugin>
			<!-- <plugin> <groupId>org.mortbay.jetty</groupId> <artifactId>maven-jetty-plugin</artifactId>
				<version>6.1.24</version> <configuration> <stopPort>9966</stopPort> <stopKey>autosparql-lite</stopKey>
				<scanIntervalSeconds>0</scanIntervalSeconds> <webAppConfig> <contextPath>/autosparql-lite</contextPath>
				<baseResource implementation="org.mortbay.resource.ResourceCollection"> -->
			<!-- Workaround for Maven/Jetty issue http://jira.codehaus.org/browse/JETTY-680 -->
			<!-- <resources>src/main/webapp,${project.build.directory}/${project.build.finalName}</resources> -->
			<!-- <resourcesAsCSV>src/main/webapp,${project.build.directory}/${project.build.finalName}</resourcesAsCSV> -->
			<!-- <resourcesAsCSV>src/main/webapp,${project.build.directory}/classes</resourcesAsCSV>
				</baseResource> </webAppConfig> <connectors> <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
				<port>9090</port> <maxIdleTime>60000</maxIdleTime> </connector> </connectors>
				</configuration> </plugin> -->
		</plugins>
	</build>

	<repositories>
		<repository>
			<id>vaadin-addons</id>
			<url>https://maven.vaadin.com/vaadin-addons</url>
		</repository>
	</repositories>

	<dependencies>
		<dependency>
			<groupId>org.aksw.autosparql</groupId>
			<artifactId>algorithm-tbsl</artifactId>
			<!-- <excludes><exclude>**/log4j.properties</exclude></excludes> -->
		</dependency>
		<dependency>
			<groupId>org.aksw.autosparql</groupId>
			<artifactId>commons</artifactId>
			<!-- <excludes><exclude>**/log4j.properties</exclude></excludes> -->
		</dependency>
		<dependency>
			<groupId>javax</groupId>
			<artifactId>javaee-web-api</artifactId>
		</dependency>
		<dependency>
			<groupId>com.vaadin</groupId>
			<artifactId>vaadin</artifactId>
			<version>${vaadin.version}</version>
		</dependency>
		<!-- <dependency> <groupId>com.google.gwt</groupId> <artifactId>gwt-user</artifactId>
			<version>${gwt.version}</version> <scope>provided</scope> </dependency> <dependency>
			<groupId>javax.validation</groupId> <artifactId>validation-api</artifactId>
			<version>1.0.0.GA</version> <scope>provided</scope> </dependency> <dependency>
			<groupId>javax.validation</groupId> <artifactId>validation-api</artifactId>
			<version>1.0.0.GA</version> <classifier>sources</classifier> <scope>provided</scope>
			</dependency> -->

		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>appfoundation</artifactId>
			<version>1.3.5</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.persistence</groupId>
			<artifactId>javax.persistence</artifactId>
			<version>2.0.0</version>
		</dependency>
		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>portallayout</artifactId>
			<version>1.3.1</version>
		</dependency>
		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>clickable-custom-layout</artifactId>
			<version>0.9.2</version>
		</dependency>
		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>popupbutton</artifactId>
			<version>1.2.1</version>
		</dependency>
		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>refresher</artifactId>
			<version>1.1.1</version>
		</dependency>
		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>invient-charts</artifactId>
			<version>0.8.6</version>
		</dependency>
		<dependency>
			<groupId>org.vaadin.addons</groupId>
			<artifactId>lucenecontainer</artifactId>
			<version>1.0.2</version>
		</dependency>


		<!-- <dependency> <groupId>org.dllearner</groupId> <artifactId>components-ext</artifactId>
			<exclusions> <exclusion> <artifactId>sparql</artifactId> <groupId>org.aksw.commons</groupId>
			</exclusion> <exclusion> <artifactId>pellet</artifactId> <groupId>com.owldl</groupId>
			</exclusion> <exclusion> <artifactId>slf4j-log4j12</artifactId> <groupId>org.slf4j</groupId>
			</exclusion> <exclusion> <artifactId>jena</artifactId> <groupId>com.hp.hpl.jena</groupId>
			</exclusion> <exclusion> <artifactId>any23-core</artifactId> <groupId>org.deri.any23</groupId>
			</exclusion> <exclusion> <artifactId>nif</artifactId> <groupId>org.nlp2rdf</groupId>
			</exclusion> </exclusions> </dependency> -->
		<dependency>
			<groupId>org.ini4j</groupId>
			<artifactId>ini4j</artifactId>
		</dependency>
		<dependency>
			<groupId>commons-configuration</groupId>
			<artifactId>commons-configuration</artifactId>
		</dependency>
		<dependency>
			<groupId>com.h2database</groupId>
			<artifactId>h2</artifactId>
		</dependency>

		<dependency>
			<groupId>org.apache.jena</groupId>
			<artifactId>jena-arq</artifactId>
		</dependency>
		<dependency>
			<groupId>org.aksw.sparql2nl</groupId>
			<artifactId>sparql2nl</artifactId>
			<version>0.0.1-SNAPSHOT</version>
		</dependency>

		<dependency>
			<groupId>com.google.guava</groupId>
			<artifactId>guava</artifactId>
		</dependency>

		<dependency>
			<groupId>org.apache.lucene</groupId>
			<artifactId>lucene-core</artifactId>
		</dependency>

		<dependency>
			<groupId>xerces</groupId>
			<artifactId>xercesImpl</artifactId>
			<version>2.8.0</version>
		</dependency>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<scope>test</scope>
		</dependency>
	</dependencies>
	


	<profiles>
		<profile>
			<id>compile-widgetset</id>
			<build>
				<plugins>
					<!-- Compile custom GWT components or widget dependencies with the GWT
						compiler -->
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>gwt-maven-plugin</artifactId>
						<version>${gwt.plugin.version}</version>
						<configuration>
							<localWorkers>1</localWorkers>
							<fork>false</fork>
							<webappDirectory>src/main/webapp/VAADIN/widgetsets</webappDirectory>
							<extraJvmArgs>-Xmx2000M -Xss1024k -XX:+UseConcMarkSweepGC</extraJvmArgs>
							<runTarget>autosparql-tbsl</runTarget>
							<hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
							<noServer>true</noServer>
							<port>9090</port>
							<compileReport>false</compileReport>
						</configuration>
						<executions>
							<execution>
								<goals>
									<goal>resources</goal>
									<goal>compile</goal>
								</goals>
							</execution>
						</executions>
						<dependencies>
							<dependency>
								<groupId>com.google.gwt</groupId>
								<artifactId>gwt-dev</artifactId>
								<version>${gwt.version}</version>
							</dependency>
							<dependency>
								<groupId>com.google.gwt</groupId>
								<artifactId>gwt-user</artifactId>
								<version>${gwt.version}</version>
							</dependency>
						</dependencies>
					</plugin>
					<plugin>
						<groupId>com.vaadin</groupId>
						<artifactId>vaadin-maven-plugin</artifactId>
						<version>1.0.2</version>
						<executions>
							<execution>
								<configuration>
								</configuration>
								<goals>
									<goal>update-widgetset</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>jrebel</id>
			<activation>
				<property>
					<name>env</name>
					<value>jrebel</value>
				</property>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.zeroturnaround</groupId>
						<artifactId>jrebel-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>generate-rebel-xml</id>
								<phase>process-resources</phase>
								<goals>
									<goal>generate</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
</project>
